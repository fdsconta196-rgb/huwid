<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Device ID</title>
</head>
<body>
<pre id="deviceId"></pre>

<script>
async function getWebGLInfo() {
  const info = {renderer:'n/a', vendor:'n/a'};
  try {
    const canvas = document.createElement('canvas');
    const gl = canvas.getContext('webgl') || canvas.getContext('experimental-webgl');
    if(!gl) return info;
    const dbg = gl.getExtension('WEBGL_debug_renderer_info');
    if(dbg){
      info.renderer = gl.getParameter(dbg.UNMASKED_RENDERER_WEBGL);
      info.vendor = gl.getParameter(dbg.UNMASKED_VENDOR_WEBGL);
    } else {
      info.renderer = gl.getParameter(gl.RENDERER);
      info.vendor = gl.getParameter(gl.VENDOR);
    }
  } catch(e){}
  return info;
}

async function hashString(str) {
  const buf = new TextEncoder().encode(str);
  const hash = await crypto.subtle.digest('SHA-256', buf);
  return Array.from(new Uint8Array(hash)).map(b=>b.toString(16).padStart(2,'0')).join('');
}

async function generateDeviceId() {
  const webgl = await getWebGLInfo();
  const data = [
    navigator.userAgent || '',
    navigator.platform || '',
    navigator.language || '',
    screen.width + 'x' + screen.height,
    window.devicePixelRatio,
    navigator.hardwareConcurrency || '',
    navigator.deviceMemory || '',
    navigator.maxTouchPoints || '',
    webgl.renderer || '',
    webgl.vendor || ''
  ].join('||');

  const id = await hashString(data);
  return id;
}

generateDeviceId().then(id => {
  document.getElementById('deviceId').textContent = id;
});
</script>
</body>
</html>